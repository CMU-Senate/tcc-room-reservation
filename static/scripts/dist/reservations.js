'use strict';var CALENDAR_DAYS_INTO_FUTURE=10,RESERVATION_TOAST_DURATION_SECONDS=3e3;$(document).ready(function(){$('.calendar').each(function(a,b){var c=$(b).data('room-id');$(b).fullCalendar({defaultView:'agendaWeek',allDaySlot:!1,selectable:!0,eventOverlap:!1,header:{left:'today',center:'',right:'prev, next'},events:function events(d,e,f,g){$.get({url:'/reservations/'+c,data:{start:d.clone().startOf('week').unix(),end:e.unix()},success:function success(h){g(h.map(function(i){return i.user===app.userId&&(i.color='green'),i.cancelled&&(i.color='lightgray'),i}))}})},select:function select(d,e){$.post({url:'/reservation/add',data:{room:c,start:d.unix(),end:e.unix()},success:function success(f){f.success?Materialize.toast('Success! Your reservation has been made.',RESERVATION_TOAST_DURATION_SECONDS):Materialize.toast('Failed to create a reservation: '+f.error+'.',RESERVATION_TOAST_DURATION_SECONDS),app.csrfToken=f.csrf_token},error:function error(){Materialize.toast('Failed to create a reservation.',RESERVATION_TOAST_DURATION_SECONDS)},complete:function complete(){$(b).fullCalendar('refetchEvents')}})},validRange:function validRange(d){return{start:d,end:d.clone().add(CALENDAR_DAYS_INTO_FUTURE,'days')}}})})});
//# sourceMappingURL=reservations.js.map
